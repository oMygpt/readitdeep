Read it DEEP - 平台功能规格说明书1. 产品概述Read it DEEP 是一个 AI 驱动的深度阅读与知识资产管理平台。它不仅仅是一个阅读器，更是一个**“认知过程记录仪”和“科研资产提炼工厂”**。它利用 LangGraph 构建智能工作流，帮助个人和团队从海量论文中提取方法、数据与灵感，并构建动态生长的知识图谱。2. 核心功能模块2.1 智能文档导入 (Smart Ingestion)这是系统的入口，采用 LangGraph 驱动的异步并行流水线。多源支持: 支持本地上传 (PDF/LaTeX/Word)、URL 导入、Zotero 同步、Google Drive 监听。高精度解析 (Mineru 集成):Mineru API (V4): 作为核心解析引擎，将 PDF 转换为带有布局信息的 Markdown。智能回退 (Fallback): 若 API 返回非直接 Markdown，系统自动下载并解压 ZIP 包，提取内容。图文重构: 解析过程中自动提取论文图片，存储至服务器 (uploads/images/{paper_id}/)，并重写 Markdown 图片路径，确保阅读时图文并茂。无阻塞体验:上传即返回，UI 显示 "Uploading..." 占位卡片。前端通过轮询 (/api/monitor) 实时更新状态："Parsing..." $\rightarrow$ "Indexing..." $\rightarrow$ "Completed"。2.2 知识库管理 (Library Management)智能元数据补全:指纹识别: 解析时自动提取 DOI 或 ArXiv ID。API 联动: 调用 ArXiv/CrossRef/Semantic Scholar API 获取准确元数据（标题、作者、会议、年份）。LLM 兜底: 若无 ID，调用 LLM 读取文档 Header 区域自动提取信息。安全策略: 仅在数据有效时覆盖，防止误删用户自定义文件名。状态与交互:列表卡片支持 Optimistic UI (乐观更新)，操作立即响应。文件处理期间锁定“打开”与“删除”操作，保证数据一致性。2.3 沉浸式阅读器 (Zen Reader) - 核心升级采用三栏布局（图谱 - 正文 - 工作台），支持 Zen 模式（全屏沉浸）。高性能渲染: 基于 React 渲染 Markdown，支持 KaTeX (数学公式)、Mermaid (流程图) 和代码高亮。智能引文交互 (Smart Citations): (新增功能)客户端解析: 利用 useMemo 和正则，自动识别正文中的引用标记（如 [1], (Smith et al., 2023)）和文末的 References 列表。悬浮超链接:上标化: 将引用标记渲染为可点击的上标链接。悬停预览 (Popover): 鼠标悬停在 [1] 上时，即时弹出一个悬浮卡片，显示该条参考文献的完整信息（作者、标题、年份），无需跳转。点击跳转: 点击后平滑滚动至文末参考文献列表。AI 辅助翻译:异步流式翻译: 基于 Token 分块，后台异步翻译，不阻塞阅读。版本切换: 支持 "原文/译文" 无缝切换，翻译结果持久化存储。听论文 (Podcast): 集成 Podcastfy，一键生成双人对话形式的论文解读音频，内置播放器支持倍速播放。2.4 智能工作台 (The Workbench)位于右侧边栏，是“科研资产”的提炼中心。磁吸式投料 (Magnetic Drop): 用户拖拽选中的文本/公式/代码，工作台自动感应并高亮对应的“车间”。三大加工车间:方法炼金台 (Method Alchemy): 提取算法参数、Loss 公式，生成 PyTorch 伪代码。支持与库中其他论文进行 Diff 对比。资产仓库 (Data Warehouse): 验证数据集 URL 有效性，自动抓取 License 和 SOTA 排名。灵感画板 (Idea Canvas): 记录 Hypothesis 分叉（原文假设 $\rightarrow$ 我的修改 $\rightarrow$ 新假设），生成双向链接笔记。LangGraph 回环验证: 提取过程包含“自我修正”机制（AI 提取 $\rightarrow$ 代码验证 $\rightarrow$ 失败重试 $\rightarrow$ 人工确认）。2.5 动态知识图谱 (Dynamic Knowledge Graph)位于左侧边栏，可视化知识连接。双层图谱:外部层: 基于 Semantic Scholar 数据，展示引用关系。包含 Ghost Nodes (幽灵节点) —— 即库中没有但被高频引用的论文（虚线显示，点击可触发下载）。内部层: 基于向量相似度 (pgvector)，展示库中拥有相似段落的论文（实线显示）。上下文联动: 阅读到 "Method" 章节时，图谱自动高亮相关的技术节点。2.6 团队协作与认知记录 (Collaboration & Cognitive Recorder)认知流记录:记录 Attention Flow (视口停留时间) 和 Interaction Stream (Prompt 交互历史)。支持“思维回放”，查看团队成员是如何一步步得出结论的。上下文聊天: 聊天室绑定在论文 ID 下，支持引用正文段落。冲突检测: 当不同成员对同一段落产生相反笔记时，AI 自动提示冲突。3. 技术架构设计 (Technical Architecture)3.1 后端 (Backend) - Python / FastAPI核心逻辑完全由 LangGraph 重构，实现状态机管理。摄入图 (Ingestion Graph):设计为 DAG (有向无环图)。Node 1: Parse: 调用 Mineru API。Node 2: Fan-out (并行分支):分支 A: 元数据提取 (S2 API / LLM)。分支 B: 向量化 (Embedding) 与 图谱构建。分支 C: 音频生成 (可选)。Node 3: Join & Save: 合并状态并写入 PostgreSQL。持久化 (Persistence):使用 AsyncSqliteSaver (或 Postgres) 保存 LangGraph 的 Checkpoints。断点续传: 服务重启后，任务可从中断的节点继续执行，无需重头解析。静态资源: 通过 FastAPI.mount 挂载图片目录，提供安全的静态资源访问。3.2 数据存储 (Data Layer)PostgreSQL: 核心数据库。pgvector: 存储段落向量，支持语义检索。JSONB: 存储工作台提取的半结构化资产 (Method Card, Dataset Card)。3.3 前端 (Frontend) - React / ViteUI 框架: Tailwind CSS + Shadcn/UI。状态管理: 局部状态 (isUploading) + 全局状态 (Zustand/Context)。性能优化:Smart Citation 实现: 使用 useMemo 解析引文，避免每次渲染都重跑正则。虚拟列表: 文献列表支持虚拟滚动，应对成千上万篇论文的场景。4. 交互细节说明 (UX Detail)场景：用户阅读时点击引文解析: 页面加载 Markdown 后，前端逻辑扫描文本，匹配 [\d+] 或 (Name, Year) 格式。渲染: 将匹配文本替换为 <span class="citation-link">[1]</span>。行为:Hover: 触发 onMouseEnter，根据 ID 在文末的 Markdown AST 中查找对应条目内容，渲染在光标上方。Click: 触发 onClick，执行 document.getElementById('ref-1').scrollIntoView({behavior: 'smooth'})。